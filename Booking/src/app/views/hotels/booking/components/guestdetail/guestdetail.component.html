<div class="card shadow">
  <div class="card-header border-bottom p-4">
    <h5 class="card-title mb-0">
      <i class="bi bi-people-fill me-2"></i>Guest Details
    </h5>
  </div>

  <div class="card-body p-4">
    <form class="row g-4">
      <!-- Dynamically render guest forms -->
      <div class="col-12">
        <!-- Loop through each room -->
         @for (room of rooms; track $index;let roomIndex = $index) {
        <div class="mt-3">
          <div class="bg-light rounded-2 px-4 py-3">
            <h6 class="mb-0">Room {{ roomIndex + 1 }} : <span class="opacity-75">Room Type</span></h6>
          </div>

          <!-- Loop through each guest in the room -->
           @for (guest of room.guests; track $index;let guestIndex = $index) {
          <div>
            <div class="row align-items-center mt-3">
              <div class="col-md-5">
                <label class="form-label">First Name</label>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  placeholder="Enter first name"
                  [(ngModel)]="guest.firstName"
                  name="firstName{{ roomIndex }}_{{ guestIndex }}"
                />
              </div>

              <div class="col-md-5">
                <label class="form-label">Last Name</label>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  placeholder="Enter last name"
                  [(ngModel)]="guest.lastName"
                  name="lastName{{ roomIndex }}_{{ guestIndex }}"
                />
              </div>

              <!-- Show delete button for guests beyond the first one -->

              @if (guestIndex > 0) {
                <div class="col-md-2">
                  <i class="fa-solid fa-xmark fs-5 text-danger" (click)="deleteGuest(roomIndex, guestIndex)" style="cursor: pointer;"></i>
                </div>
              }
            </div>
          </div>
        }
          <!-- Add New Guest button for each room -->

          <!-- Delete room button -->
      <!--   @if (rooms.length > 1) {

          <div class="col-12">
            <a href="javascript:void(0);" class="btn btn-link mb-0 p-0 text-danger" (click)="deleteRoom(roomIndex)">
              <i class="fa-solid fa-trash me-2"></i>Delete Room
            </a>
          </div>
        } -->
          <hr />
        </div>
        @if (canAddGuest(roomIndex)) {
          <div class="col-12">
            <a href="javascript:void(0);" class="btn btn-link mb-0 p-0" (click)="addGuest(roomIndex)">
              <i class="fa-solid fa-plus me-2"></i>Add New Guest
            </a>
          </div>
        }
      }

      </div>

      <!-- Show "Add New Guest" button only if less than 4 guests are added -->

      <div class="col-md-5">
        <label class="form-label">Email id</label>
        <input
          type="email"
          class="form-control form-control-lg"
          placeholder="Enter your email"
        />
        <div id="emailHelp" class="form-text">
          (Booking voucher will be sent to this email ID)
        </div>
      </div>

      <div class="col-md-5">
        <label class="form-label">Mobile number</label>
        <input
          type="text"
          class="form-control form-control-lg"
          placeholder="Enter your mobile number"
        />
      </div>
    </form>
<!--
    <div class="alert alert-info my-4" role="alert">
      <a routerLink="/auth/sign-up" class="alert-heading h6">Login</a> to
      prefill all details and get access to secret deals
    </div> -->

    <div class="card border mt-4">
      <div class="card-header border-bottom mb-0">
        <h5 class="card-title mb-2">Special request</h5>
      </div>

      <div class="card-body">
        <form class="hstack flex-wrap pb-1 gap-3">
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value=""
              id="hotelType1"
            />
            <label class="form-check-label" for="hotelType1">Smoking room</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value=""
              id="hotelType1"
            />
            <label class="form-check-label" for="hotelType1">Late check-in</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value=""
              id="hotelType1"
            />
            <label class="form-check-label" for="hotelType1">Early check-in</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value=""
              id="hotelType1"
            />
            <label class="form-check-label" for="hotelType1">Clients Vip</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value=""
              id="hotelType1"
            />
            <label class="form-check-label" for="hotelType1">Large bed</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value=""
              id="hotelType1"
            />
            <label class="form-check-label" for="hotelType1">Twin beds</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value=""
              id="hotelType1"
            />
            <label class="form-check-label" for="hotelType1">Honeymoon Couple</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value=""
              id="hotelType1"
            />
            <label class="form-check-label" for="hotelType1">Connecting Room</label>
          </div>

          <!-- Add other special requests as needed -->
        </form>
        <hr class="mb-0">
        <p class=" p-2 pt-3 text-danger">Note: Special Requests are not guaranteed and are subject to availability upon check-in at the hotel. Please get in touch with our Customer Support if you'd like to add guaranteed services.</p>
      </div>
    </div>
  </div>
</div>
