<div class="col-xl-10 position-relative mt-n3 mt-xl-n9">
  <p class="d-none d-xl-block mb-3 fs-5 opacity-75 fw-semibold">For The Pest Price and More Availability</p>

  <form class="card shadow rounded-3 position-relative p-4 pe-md-5 pb-5 pb-md-4">

    <div class="row g-4 align-items-center">
      <div class="col-lg-4">
        <div
          class="form-control-border form-control-transparent form-fs-md d-flex">
          <i class="bi bi-geo-alt fs-3 me-2 mt-2"></i>

          <div class="flex-grow-1">
            <label class="form-label">Location</label>
            <select selectFormInput data-search-enabled="true">
              <option value="-1" disabled selected>Select location</option>
              <option>San Jacinto, USA</option>
              <option>North Dakota, Canada</option>
              <option>West Virginia, Paris</option>
            </select>
          </div>
        </div>
      </div>

      <div class="col-lg-4">
        <div class="d-flex">
          <i class="bi bi-calendar fs-3 me-2 mt-2"></i>

          <div class="form-control-border form-control-transparent form-fs-md">
            <label class="form-label">Check in - out</label>
            <input
              type="text"
              type="text"
              mwlFlatpickr
              [flatpickrOptions]="{ mode: 'range', dateFormat: 'd M' }"
              class="form-control flatpickr"
              placeholder="Select date"
              value="19 Sep to 28 Sep"
            />
          </div>
        </div>
      </div>

      <div class="col-lg-4">
        <div
          class="form-control-border form-control-transparent form-fs-md d-flex"
        >
          <i class="bi bi-person fs-3 me-2 mt-2"></i>

          <div class="w-100">
            <label class="form-label">Guests & Rooms</label>
            <div ngbDropdown class="dropdown guest-selector position-relative" >
              <input
                ngbDropdownToggle
                type="text"
                class="form-guest-selector form-control selection-result py-2 px-3 rounded shadow-sm"
                [value]="getGuestsValue()"
                data-bs-auto-close="outside"
                data-bs-toggle="dropdown"
                readonly
              />

              <ul
                ngbDropdownMenu
                class="dropdown-menu guest-selector-dropdown p-3 shadow rounded-3"
                style="width: 150%; max-width: 450px;"
              >
                <!-- Loop for each room -->
                 @for (room of formValue.rooms; track $index; let i = $index) {
                <li class="d-flex flex-column mb-3">
                  <div class="d-flex justify-content-between align-items-center">
                    <h6 class="mb-1 fs-6 fw-bold">Room {{ i + 1 }} of {{ formValue.rooms.length }}</h6>

                    <!-- Remove Room Button -->
                     @if (formValue.rooms.length > 1) {
                      <i class="bi bi-trash" (click)="removeRoom(i)" style="cursor: pointer;"></i>
                  }
                  </div>

                  <!-- Adults Section -->
                  <div class="d-flex justify-content-between my-2">
                    <span>Adults</span>
                    <div class="d-flex align-items-center">
                        <i class="bi bi-dash-circle" style="cursor: pointer;" (click)="updateRoomGuests(i, 'adults', false)"></i>
                      <span class="px-2">{{ formValue.rooms[i].adults }}</span>
                        <i class="bi bi-plus-circle" style="cursor: pointer;" (click)="updateRoomGuests(i, 'adults', true)"></i>
                    </div>
                  </div>

                  <!-- Child age input fields -->
                  @if (formValue.rooms[i].children.length > 0) {
                    <div class="mt-2">
                      @for (childAge of formValue.rooms[i].children; track $index;let j = $index) {
                      <div class="d-flex align-items-center mb-2 justify-content-between">
                        <span>Child {{ j + 1 }} Age: </span>
                        <div class="d-flex align-items-center">
                        <input
                          type="number"
                          min="1"
                          max="12"
                          class="form-control form-control-sm mx-2"
                          [(ngModel)]="formValue.rooms[i].children[j]"
                          placeholder="Age"
                          style="width: 80px;"
                        />
                          <i class="bi bi-x-circle" (click)="removeChild(i, j)" style="cursor: pointer;"></i>
                        </div>
                      </div>
                    }
                    </div>
                  }

                  <!-- Children Section -->
                  <div class="d-flex justify-content-center my-2">
                    @if (formValue.rooms[i].children.length < 2) {
                    <span style="cursor: pointer;" (click)="updateRoomGuests(i, 'children', true)">+ add child</span>
                  }
                  </div>


                </li>
              }

                <!-- Add Room Button -->
                 @if (formValue.rooms.length<5) {
                  <li class="d-flex justify-content-center mt-3">
                    <button
                      type="button"
                      class="btn btn-outline-primary btn-sm px-4 rounded-pill"
                      (click)="addRoom()"
                      [disabled]="formValue.rooms.length >= 5"
                    >
                      <i class="bi bi-plus-circle me-1"></i> Add a Room
                    </button>
                  </li>
                 }

              </ul>
            </div>
          </div>




        </div>
      </div>
    </div>
    <div class="row g-4 align-items-center mt-1">
      <div class="col-lg-4">
        <div
          class="form-control-border form-control-transparent form-fs-md d-flex"
        >
          <i class="fa-solid fa-earth-asia fs-3 me-2 mt-2"></i>
          <div class="flex-grow-1">
            <label class="form-label">Nationality</label>
            <select selectFormInput data-search-enabled="true">
              <option value="-1" disabled selected>Select Your Country</option>
              <option>San Jacinto, USA</option>
              <option>North Dakota, Canada</option>
              <option>West Virginia, Paris</option>
            </select>
          </div>
        </div>
      </div>

      <div class="col-lg-4">
        <div class="d-flex">
          <i class="fa-solid fa-hotel fs-3 me-2 mt-2"></i>

          <div class="form-control-border form-control-transparent form-fs-md">
            <label class="form-label">Hotel Name</label>
            <input
              type="text"
              type="text"
              class="form-control flatpickr"
              placeholder="Hotel Name"
            />
          </div>
        </div>
      </div>

    </div>

    <div class="btn-position-md-middle">
      <a class="btn btn-primary " href="javascript:void()">
        <span class="fs-6 pt-2">Search</span>
      </a>
    </div>

  </form>


  <div class="pt-1 mb-3 d-flex flex-column justify-content-evenly rounded-2 " style="height: 100px;width: 60%;"
        >
        <div>
        <div class="mt-4 d-flex justify-content-between align-items-center text-center" style="background-color: #fff !important;">

            <div class="shadow p-3 rounded-2" style="width: 32%;">
              <div><i class="fa-solid fa-wallet"></i></div>
              <div style="color: #6c60df;"><span>Balance Available</span></div>
              <div><span>1458<span class="ms-1">USD</span></span></div>
            </div>
            <div class="shadow p-3 rounded-2" style="width: 32%;">
              <div><i class="fa-solid fa-sack-dollar"></i></div>
              <div style="color: #6c60df;"><span>Total Paid</span></div>
              <div><span>0<span class="ms-1">USD</span></span></div>
            </div>
            <div class="shadow p-3 rounded-2" style="width: 32%;">
              <div><i class="fa-solid fa-clock"></i></div>
              <div style="color: #6c60df;"><span>UnPaid Orders</span></div>
              <div><span>0<span class="ms-1">USD</span></span></div>

            </div>
          </div>
        </div>
          <div class="text-center mt-4">
         <div  class="d-flex justify-content-between align-items-center" style="background-color: #fff !important;">
            <div class="shadow p-3 rounded-2" style="width: 32%;">
              <i class="fa-regular fa-clock"></i>
              <div style="color: #6c60df;"><span>UnPaid Order</span></div>
              <div><span>0</span></div>
            </div>
            <div class="shadow p-3 rounded-2" style="width: 32%;">
              <i class="fa-solid fa-check"></i>
              <div style="color: #6c60df;"><span>Completed Order</span></div>
              <div><span>0</span></div>
            </div>
            <div class="shadow p-3 rounded-2" style="width: 32%;">
              <i class="fa-solid fa-xmark"></i>
              <div style="color: #6c60df;"><span>Canceled Order</span></div>
              <div><span>0</span></div>
            </div>
          </div>
          </div>
        </div>
</div>
